import{_ as S,r as a,o as Y,a as F,c as H,b as n,d as o,e,f as g,w as y,v as N,n as m,g as X,h as b,t as r,F as h,i as w,j as K}from"./index-BlyxiB9h.js";const j="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAgCAYAAACcuBHKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALuSURBVHgBxZftcdpAEIbflcDJTDIJHYQScAWBH3bGE5PgCoAKQgfBHYQKQirAmZBhxs6McAXGHVAC+WsJXXYPnZDF14mvvD8ACd3eo7293T3CGvV6qvDqBLUwRMl18A4KBf0HYcL3HkNgeFGlIXYUrZr89Qm+8KQtviysM6CAMUJcn3+iLvYFcftblYSDFIqpByc84d/o91u1CDcMfDQvrmiMXSD+9FWdjX9DNIGeWKETBOimjWtY9hQ/Uzf3xCtTH5WsIJQ0ym//EBvkyfMB2pUrmqwz4A1UcRrCU5HnBCTv43TTuKQc+ZAYkC9zM1S8xlVq2RiqXNDYfcIp/xxFb1UM8viKDNIQbzgITQywke6HKrWRQQKb42Ug4iCdqTX4pcq24zXEFGhEAGPXxzW2kICoEE1z7QI127HOHRMndsKwskV0G53NcoZeQvZK3XacwwmnbC58hR/YUWpuozDoqaLNGIeJ5w8G8ZpurURcALnnuWYlBPYsRbDemnMIlX3QOpFan+aXQiTd57goYUdxjMU2Xgaz3LERgj0RP0gOPmNH8Uu919+83W2zpiPbyniDB9ZsI3qZOPU3zHYPgI7tOB2YUiei60Iuj+/YQoOBhtfpWrzwwseN7VgNcXZJUjmH0b0yV9NMIALgchGjeRHrZEl68RbNuWiaZWEjjbu+erBZGqkRSQDWJMjgBdGzfiJdliOgLteEn+EUI9MnCBwvm9QGCeRy2mjWvmKhsxKQYKrjoowMkriKdkYpK8hCxpT+gGOkwpmvyYYfNxngZ+5zhFPpP6ScI9FXuHl+J4slpU0P6CXyUZoSpJ0rRqPGnFPG+SfcpHOBxw0SNzUeMnhkI8Q20iAnvKQq7ikm7NnK+UcaHQ3C6LavuolGeCXIQSFsQfZeytM6v6QGx0Xc6HA+8dL958EhloHwbvLkjHNUCANC8xqlk6ABOXhMpMWNdZtnjc8lDNA4mieMzuRMo2bHiuiIcY//JS6QLW928sM/4+JKAJlhD0EAAAAASUVORK5CYII=",E={class:"student-payments"},R={class:"top-bar"},G={class:"search-wrapper"},z={class:"filter-button-wrapper"},W={class:"filter-bar"},Z={key:0,class:"filters-box"},L={class:"relative w-56"},P={key:0,class:"absolute z-50 mt-2 w-full bg-white border border-purple-200 rounded-lg shadow-lg"},O=["onClick"],T={class:"relative w-56"},V={key:0,class:"absolute z-50 mt-2 w-full bg-white border border-purple-200 rounded-lg shadow-lg"},q=["onClick"],J={class:"filter-select checkbox-style"},$={class:"student-table"},ee=["onClick"],te={class:"w-6 h-6 rounded-md bg-[#F1EFFF] text-[rgb(98,82,254)] text-xs font-semibold flex items-center justify-center"},se={__name:"StudentPayments",setup(le){const A=a(""),p=a(!1),c=a(""),d=a(""),f=a(!1),i=a(!1),u=a(!1),x=()=>{p.value=!p.value},_=()=>{i.value=!i.value,u.value=!1},Q=()=>{u.value=!u.value,i.value=!1},U=l=>{c.value=l,i.value=!1},B=l=>{d.value=l,u.value=!1},M=["TechOrda","Скидка 70%","Скидка 30%","Внутренний грант"],I=["Студент","Выпускник"],C=a([]);Y(async()=>{try{const l=await F.get("/api/students");C.value=l.data.map(t=>({id:t.id,name:t.full_name,iin:t.iin,source:t.funding_source||"Не указано",status:t.status,paid:t.paid_amount,remaining:t.amount_remaining,debt:t.amount_remaining>0}))}catch(l){console.error("Ошибка при загрузке студентов:",l)}});const D=H(()=>C.value.filter(l=>{const t=l.name.toLowerCase().includes(A.value.toLowerCase()),s=!c.value||l.source===c.value,v=!d.value||l.status===d.value,k=!f.value||l.debt;return t&&s&&v&&k}).sort((l,t)=>l.id-t.id));return(l,t)=>(o(),n("div",E,[e("div",R,[t[3]||(t[3]=e("h2",null,"Оплаты студентов",-1)),e("div",G,[t[2]||(t[2]=e("img",{src:j,class:"search-icon"},null,-1)),y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>A.value=s),type:"text",placeholder:"Поиск",class:"search-input"},null,512),[[N,A.value]])])]),e("div",z,[e("div",W,[e("button",{class:m(["filter-btn",{"filter-btn--active":p.value}]),onClick:x,type:"button"},t[4]||(t[4]=[e("img",{src:X,class:"filter-icon"},null,-1),e("span",null,"Фильтр",-1)]),2)])]),p.value?(o(),n("div",Z,[e("div",L,[e("button",{onClick:_,class:"filter-select w-full flex justify-between items-center",type:"button"},[b(r(c.value||"Финансирование")+" ",1),(o(),n("svg",{class:m(["w-4 h-4 ml-2 transform transition-transform duration-200",i.value?"rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[5]||(t[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),i.value?(o(),n("ul",P,[(o(),n(h,null,w(M,s=>e("li",{key:s,onClick:v=>U(s),class:m(["cursor-pointer px-4 py-2 hover:bg-gray-100",{"text-[rgb(98,82,254)] font-medium":c.value===s}])},r(s),11,O)),64))])):g("",!0)]),e("div",T,[e("button",{onClick:Q,class:"filter-select w-full flex justify-between items-center",type:"button"},[b(r(d.value||"Статус")+" ",1),(o(),n("svg",{class:m(["w-4 h-4 ml-2 transform transition-transform duration-200",u.value?"rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[6]||(t[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),u.value?(o(),n("ul",V,[(o(),n(h,null,w(I,s=>e("li",{key:s,onClick:v=>B(s),class:m(["cursor-pointer px-4 py-2 hover:bg-gray-100",{"text-[rgb(98,82,254)] font-medium":d.value===s}])},r(s),11,q)),64))])):g("",!0)]),e("label",J,[y(e("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=s=>f.value=s)},null,512),[[K,f.value]]),t[7]||(t[7]=b(" Только с долгами "))])])):g("",!0),e("table",$,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",{class:"w-12"},"#"),e("th",null,"Студент"),e("th",null,"ИИН"),e("th",null,"Финансирование")])],-1)),e("tbody",null,[(o(!0),n(h,null,w(D.value,(s,v)=>(o(),n("tr",{key:s.id,onClick:k=>l.$router.push({name:"StudentPaymentCalendar",params:{id:s.id}}),class:"cursor-pointer"},[e("td",null,[e("div",te,r(v+1),1)]),e("td",null,r(s.name),1),e("td",null,r(s.iin),1),e("td",null,r(s.source),1)],8,ee))),128))])])]))}},oe=S(se,[["__scopeId","data-v-8b576fb8"]]);export{oe as default};

import{d as H,r as n,o as j,a as N,c as X,b as o,e as t,f,w as y,v as E,n as m,_ as K,g as b,t as i,F as h,h as w,i as R,j as a,k as G}from"./index-D1yyfS71.js";const T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAgCAYAAACcuBHKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALuSURBVHgBxZftcdpAEIbflcDJTDIJHYQScAWBH3bGE5PgCoAKQgfBHYQKQirAmZBhxs6McAXGHVAC+WsJXXYPnZDF14mvvD8ACd3eo7293T3CGvV6qvDqBLUwRMl18A4KBf0HYcL3HkNgeFGlIXYUrZr89Qm+8KQtviysM6CAMUJcn3+iLvYFcftblYSDFIqpByc84d/o91u1CDcMfDQvrmiMXSD+9FWdjX9DNIGeWKETBOimjWtY9hQ/Uzf3xCtTH5WsIJQ0ym//EBvkyfMB2pUrmqwz4A1UcRrCU5HnBCTv43TTuKQc+ZAYkC9zM1S8xlVq2RiqXNDYfcIp/xxFb1UM8viKDNIQbzgITQywke6HKrWRQQKb42Ug4iCdqTX4pcq24zXEFGhEAGPXxzW2kICoEE1z7QI127HOHRMndsKwskV0G53NcoZeQvZK3XacwwmnbC58hR/YUWpuozDoqaLNGIeJ5w8G8ZpurURcALnnuWYlBPYsRbDemnMIlX3QOpFan+aXQiTd57goYUdxjMU2Xgaz3LERgj0RP0gOPmNH8Uu919+83W2zpiPbyniDB9ZsI3qZOPU3zHYPgI7tOB2YUiei60Iuj+/YQoOBhtfpWrzwwseN7VgNcXZJUjmH0b0yV9NMIALgchGjeRHrZEl68RbNuWiaZWEjjbu+erBZGqkRSQDWJMjgBdGzfiJdliOgLteEn+EUI9MnCBwvm9QGCeRy2mjWvmKhsxKQYKrjoowMkriKdkYpK8hCxpT+gGOkwpmvyYYfNxngZ+5zhFPpP6ScI9FXuHl+J4slpU0P6CXyUZoSpJ0rRqPGnFPG+SfcpHOBxw0SNzUeMnhkI8Q20iAnvKQq7ikm7NnK+UcaHQ3C6LavuolGeCXIQSFsQfZeytM6v6QGx0Xc6HA+8dL958EhloHwbvLkjHNUCANC8xqlk6ABOXhMpMWNdZtnjc8lDNA4mieMzuRMo2bHiuiIcY//JS6QLW928sM/4+JKAJlhD0EAAAAASUVORK5CYII=",z={class:"student-payments"},P={class:"top-bar"},W={class:"search-wrapper"},Z={class:"filter-button-wrapper"},L={class:"filter-bar"},O={key:0,class:"filters-box"},V={class:"relative w-48"},q={key:0,class:"funding-dropdown absolute z-10 w-full mt-2 bg-white border rounded-lg shadow-md"},J=["onClick"],$={key:0,class:"text-[rgb(98,82,254)]"},ee={class:"relative w-56"},te={key:0,class:"absolute z-50 mt-2 w-full bg-white border border-purple-200 rounded-lg shadow-lg"},se=["onClick"],le={class:"filter-select checkbox-style"},ne={class:"student-table"},oe=["onClick"],ae={class:"w-6 h-6 rounded-md bg-[#F1EFFF] text-[rgb(98,82,254)] text-xs font-semibold flex items-center justify-center"},re=H({__name:"StudentPayments",setup(ie){const A=n(""),p=n(!1),r=n([]),u=n(""),g=n(!1),c=n(!1),d=n(!1),x=n(!1),_=n(!1),Q=n(!1),U=["TechOrda","Скидка 70%","Скидка 30%","Внутренний грант","Полная оплата"],B=["Студент","Выпускник"],k=n([]),M=()=>{p.value=!p.value},I=()=>{c.value=!c.value,x.value=!1,_.value=!1,Q.value=!1},S=()=>{d.value=!d.value,c.value=!1},Y=l=>{u.value=l,d.value=!1},D=l=>{const e=r.value.indexOf(l);e===-1?r.value.push(l):r.value.splice(e,1)};j(async()=>{try{const l=await N.get("/api/students");k.value=l.data.map(e=>({id:e.id,name:e.full_name,iin:e.iin,source:e.funding_source||"Не указано",status:e.status,paid:e.paid_amount,remaining:e.amount_remaining,debt:e.amount_remaining>0}))}catch(l){console.error("Ошибка при загрузке студентов:",l)}});const F=X(()=>k.value.filter(l=>{const e=l.name.toLowerCase().includes(A.value.toLowerCase()),s=r.value.length===0||r.value.includes(l.source),v=!u.value||l.status===u.value,C=!g.value||l.debt;return e&&s&&v&&C}).sort((l,e)=>l.id-e.id));return(l,e)=>(a(),o("div",z,[t("div",P,[e[3]||(e[3]=t("h2",null,"Оплаты студентов",-1)),t("div",W,[e[2]||(e[2]=t("img",{src:T,class:"search-icon"},null,-1)),y(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>A.value=s),type:"text",placeholder:"Поиск",class:"search-input"},null,512),[[E,A.value]])])]),t("div",Z,[t("div",L,[t("button",{class:m(["filter-btn",{"filter-btn--active":p.value}]),onClick:M,type:"button"},e[4]||(e[4]=[t("img",{src:K,class:"filter-icon"},null,-1),t("span",null,"Фильтр",-1)]),2)])]),p.value?(a(),o("div",O,[t("div",V,[t("button",{onClick:I,class:"filter-select w-full flex justify-between items-center",type:"button"},[b(i(r.value.length?r.value.join(", "):"Тип финансирования")+" ",1),(a(),o("svg",{class:m(["w-4 h-4 ml-2 transform transition-transform duration-200",c.value?"rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e[5]||(e[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),c.value?(a(),o("ul",q,[(a(),o(h,null,w(U,s=>t("li",{key:s,onClick:v=>D(s),class:"cursor-pointer px-4 py-2 hover:bg-gray-100 flex justify-between items-center"},[t("span",{class:m({"text-[rgb(98,82,254)] font-medium":r.value.includes(s)})},i(s),3),r.value.includes(s)?(a(),o("span",$,"✔")):f("",!0)],8,J)),64))])):f("",!0)]),t("div",ee,[t("button",{onClick:S,class:"filter-select w-full flex justify-between items-center",type:"button"},[b(i(u.value||"Статус")+" ",1),(a(),o("svg",{class:m(["w-4 h-4 ml-2 transform transition-transform duration-200",d.value?"rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e[6]||(e[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),d.value?(a(),o("ul",te,[(a(),o(h,null,w(B,s=>t("li",{key:s,onClick:v=>Y(s),class:m(["cursor-pointer px-4 py-2 hover:bg-gray-100",{"text-[rgb(98,82,254)] font-medium":u.value===s}])},i(s),11,se)),64))])):f("",!0)]),t("label",le,[y(t("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=s=>g.value=s)},null,512),[[R,g.value]]),e[7]||(e[7]=b(" Только с долгами "))])])):f("",!0),t("table",ne,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",{class:"w-12"},"#"),t("th",null,"Студент"),t("th",null,"ИИН"),t("th",null,"Финансирование")])],-1)),t("tbody",null,[(a(!0),o(h,null,w(F.value,(s,v)=>(a(),o("tr",{key:s.id,onClick:C=>l.$router.push({name:"StudentPaymentCalendar",params:{id:s.id}}),class:"cursor-pointer"},[t("td",null,[t("div",ae,i(v+1),1)]),t("td",null,i(s.name),1),t("td",null,i(s.iin),1),t("td",null,i(s.source),1)],8,oe))),128))])])]))}}),ce=G(re,[["__scopeId","data-v-4ebbeb9d"]]);export{ce as default};
